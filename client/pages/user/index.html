<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Güvənin Və Qazancın Tək Adresi BetButa</title>
    <!-- ! FONT -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,400;0,500;0,600;1,400;1,500&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Oswald:wght@500&display=swap"
      rel="stylesheet"
    />
    <!-- ! FONT AWESOME -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="../../assets/style/index/index.css" />
    <!-- ! OWL CARAOUSEL CSS -->
  </head>
  <body>
    <!-- ! nav mobile -->
    <section class="overlay"></section>
    <div class="nav-aside">
      <div class="wrapper">
        <div class="language-bar">
          <select name="gg" id="g">
            <option value="">AZ</option>
            <option value="">ENG</option>
            <option value="">RU</option>
          </select>
        </div>
        <div class="nav-list">
          <nav>
            <ul>
              <li>
                <a href="" class="link">
                  <i
                    class="fa-solid fa-futbol fa-lg"
                    style="color: #ffd43b"
                  ></i>
                  İDMAN MƏRCLƏRİ</a
                >
              </li>
              <li>
                <a href="" class="link">
                  <i class="fa-solid fa-tv fa-lg"></i>
                  Canlı Mərc
                </a>
              </li>
              <li><a href="" class="link">E-SPORTS</a></li>
              <li><a href="" class="link">SLOT</a></li>
              <li>
                <a href="" class="link">MINIGAMES</a>
                <span>NEW</span>
              </li>
              <li><a href="" class="link">CANLI KAZİNO</a></li>
              <li><a href="" class="link">VİRTUAL</a></li>
              <li>
                <a href="" class="link">RACİNG</a>
                <span>NEW</span>
              </li>
              <li>
                <a href="">
                  <img
                    src="../../assets/images/section/betX.svg"
                    class="jetX"
                    alt=""
                    width="45"
                    height="30"
                  />
                </a>
              </li>
              <li><a href="" class="link">BONUSLAR</a></li>
              <li><a href="" class="link">Canlı Dəstək</a></li>
              <li><a href="" class="link">Əlaqə</a></li>
              <li class="passive"><a href="" class="link">Ortaqlıq</a></li>
              <li class="passive">
                <a href="" class="link"
                  ><i class="fa-solid fa-circle-info fa-lg"></i> Şirkət
                  Məlumatları</a
                >
              </li>
              <li class="passive">
                <a href="" class="link"
                  ><i class="fa-solid fa-circle-info fa-lg"></i> Şərtlər və
                  qaydalar</a
                >
              </li>
              <li class="passive">
                <a href="" class="link"
                  ><i class="fa-solid fa-circle-info fa-lg"></i> Məsuliyyətli
                  mərc</a
                >
              </li>
              <li class="passive">
                <a href="" class="link"
                  ><i class="fa-solid fa-circle-info fa-lg"></i> Gizlilik
                  Politikası</a
                >
              </li>
              <li class="passive">
                <a href="" class="link"
                  ><i class="fa-solid fa-circle-info fa-lg"></i> S.S.S.</a
                >
              </li>
              <li class="passive">
                <a href="" class="link"
                  ><i class="fa-solid fa-circle-info fa-lg"></i> Özünü
                  Kənarlaşdırma</a
                >
              </li>
              <li class="passive">
                <a href="" class="link"
                  ><i class="fa-solid fa-circle-info fa-lg"></i> Mübahisələrin
                  həlli</a
                >
              </li>
              <li class="passive">
                <a href="" class="link"
                  ><i class="fa-solid fa-circle-info fa-lg"></i> Ədalət və RNG
                  Test Metodları</a
                >
              </li>
              <li class="passive">
                <a href="" class="link"
                  ><i class="fa-solid fa-circle-info fa-lg"></i>
                  SPORTSBOOK_TERMS</a
                >
              </li>
            </ul>
          </nav>
        </div>
      </div>
    </div>

    <div class="root">
      <!-- ! HEADER -->
      <header id="header">
        <!--! HEADER => MOBILE -->
        <div class="mobile-part">
          <div class="menu-icon">
            <i class="fa-solid fa-bars"></i>
            <div class="logo-banner">
              <a href="./index.html">
                <img
                  src="../../assets/images/section/logo.png"
                  alt=""
                  width="114"
                  height="32"
                />
              </a>
            </div>
          </div>
          <div class="content">
            <div class="chat-banner">
              <i class="fa-solid fa-comment"></i>
            </div>
            <div class="btn-groups">
              <a href="./register.html" class="btn btn-register"> Qeydiyyatdan Keç </a>
              <a href="" class="btn btn-login"> Daxil ol </a>
            </div>
          </div>
        </div>
        <!--! HEADER => MOBILE -->
        <div class="hero-part">
          <div class="detail-part">
            <div class="clock">13-06-2025 13:17:15</div>
            <div class="social-items">
              <a href="">
                <i class="fa-brands fa-instagram"></i>
              </a>
              <a href="">
                <i class="fa-brands fa-telegram"></i>
              </a>
              <a href="">
                <i class="fa-brands fa-facebook"></i>
              </a>
              <a href="">
                <i class="fa-brands fa-youtube"></i>
              </a>
            </div>
            <div class="download-items">
              <a href="" class="play-store">
                <img
                  src="../../assets/images/section/download_play.png"
                  alt=""
                  width="90"
                  height="25"
                />
              </a>
              <a href="" class="app-store">
                <img
                  src="../../assets/images/section/download_apple.png"
                  alt=""
                  width="90"
                  height="25"
                />
              </a>
            </div>
          </div>
          <div class="auth-part">
            <div id="content">
              <div class="form-bar">
                <span class="forgot-password">
                  <a href="" class="password-link"> Şifrəmi Unutdum </a>
                </span>
                <a href="./register.html" class="btn btn-register">Qeydiyyatdan Keç</a>
                <form id="loginForm">
                    <input
                      type="text"
                      class="username"
                      name="username"
                      id="username"
                      placeholder="İstifadəçi adı"
                      required
                    />
                    <input
                      type="password"
                      class="password"
                      name="password"
                      id="password"
                      placeholder="Şifrə"
                      required
                    />
                   <div class="btn btn-login" onclick="handleQuickLogin(event)">Daxil ol</div>
                </form>
              </div>
            </div>

            <div class="language-bar">
              <span>AZ</span>
              <img src="../../assets/images/section/az.png" alt="" />
            </div>
          </div>
        </div>
        <div class="nav-part">
          <div class="banner">
            <a href="./index.html">
              <img src="../../assets/images/section/logo.png" alt="" width="114" height="32" />
            </a>
          </div>
          <nav>
            <ul>
              <li><a href="" class="link">İDMAN MƏRCLƏRİ</a></li>
              <li><a href="" class="link">Canlı Mərc</a></li>
              <li><a href="" class="link">E-SPORTS</a></li>
              <li><a href="" class="link">SLOT</a></li>
              <li>
                <a href="" class="link">MINIGAMES</a>
                <span>NEW</span>
              </li>
              <li><a href="" class="link">CANLI KAZİNO</a></li>
              <li><a href="" class="link">VİRTUAL</a></li>
              <li>
                <a href="" class="link">RACİNG</a>
                <span>NEW</span>
              </li>
              <li>
                <a href="">
                  <img
                    src="../../assets/images/section/betX.svg"
                    class="jetX"
                    alt=""
                    width="45"
                    height="30"
                  />
                </a>
              </li>
              <li><a href="" class="link">BONUSLAR</a></li>
            </ul>
          </nav>
        </div>
      </header>
      <!-- ! HEADER -->

      <!-- ! MAIN -->
      <main>
        <div class="main-slider">
          <div class="swiper mySwiper">
            <div class="swiper-wrapper">
              <div class="swiper-slide">
                <a href="">
                  <img src="../../assets/images/cover/cover-1.jpeg" alt="" />
                </a>
              </div>
              <div class="swiper-slide">
                <a href="">
                  <img src="../../assets/images/cover/cover-2.jpeg" alt="" />
                </a>
              </div>
              <div class="swiper-slide">
                <a href="">
                  <img src="../../assets/images/cover/cover-3.png" alt="" />
                </a>
              </div>
              <div class="swiper-slide">
                <a href="">
                  <img src="../../assets/images/cover/cover-4.jpeg" alt="" />
                </a>
              </div>
              <div class="swiper-slide">
                <a href="">
                  <img src="../../assets/images/cover/cover-5.jpeg" alt="" />
                </a>
              </div>
              <div class="swiper-slide">
                <a href="">
                  <img src="../../assets/images/cover/cover-6.jpeg" alt="" />
                </a>
              </div>
              <div class="swiper-slide">
                <a href="">
                  <img src="../../assets/images/cover/cover-7.jpeg" alt="" />
                </a>
              </div>
            </div>
            <div class="swiper-button-next"></div>
            <div class="swiper-button-prev"></div>
          </div>
        </div>
        <div class="wrapper-content">
          <div class="mini-games">
            <div class="content">
              <div class="box box-1">
                <a href="">
                  <img src="../../assets/images/section/section-1.png" alt="" />
                </a>
              </div>
              <div class="box box-2">
                <a href="">
                  <img src="../../assets/images/section/section-2.jpeg" alt="" />
                </a>
              </div>
              <div class="box box-3">
                <a href="">
                  <img src="../../assets/images/section/section-3.png" alt="" />
                </a>
              </div>
              <div class="box box-4">
                <a href="">
                  <img src="../../assets/images/section/section-1.png" alt="" />
                </a>
              </div>
            </div>
          </div>
          <div class="mini-games-2">
            <h3 class="title">
              <span>SLOT</span>
              <a href="">SEE ALL</a>
            </h3>
            <div class="content">
              <div class="box box-1">
                <a href="">
                  <img src="../../assets/images/section/game-1.jpeg" alt="" />
                </a>
              </div>
              <div class="box box-2">
                <a href="">
                  <img src="../../assets/images/section/game-2.jpeg" alt="" />
                </a>
              </div>
              <div class="box box-3">
                <a href="">
                  <img src="../../assets/images/section/game-3.jpeg" alt="" />
                </a>
              </div>
              <div class="box box-4">
                <a href="">
                  <img src="../../assets/images/section/game-4.jpeg" alt="" />
                </a>
              </div>
            </div>
          </div>
        </div>
      </main>
      <!-- ! MAIN -->
      <footer>
        <div class="wrapper">
          <div class="menu">
            <nav>
              <ul class="main">
                <li>
                  <span>Əsas Bölmələr</span>
                  <ul>
                    <li><a href="#">Idman Mərcləri</a></li>
                    <li><a href="#">Virtual Mərclər</a></li>
                    <li><a href="#">Slot</a></li>
                    <li><a href="#">Canli Kazino</a></li>
                    <li><a href="#">Loto</a></li>
                  </ul>
                </li>
                <li>
                  <span href="#">Haqqımızda</span>
                  <ul>
                    <li><a href="#">Şirkət detayları</a></li>
                    <li><a href="#">Şərtlər və Qaydalar</a></li>
                    <li><a href="#">Məsuliyyətli mərc</a></li>
                    <li><a href="#">Gizlilik Politikası</a></li>
                    <li><a href="#">Mübahisələrin həlli</a></li>
                    <li><a href="#">Ədalət və RNG Test Metodları</a></li>
                    <li><a href="#">Özünü Kənarlaşdırma</a></li>
                    <li><a href="#">Ortaqlıq</a></li>
                  </ul>
                </li>
                <li>
                  <span href="#">Dəstək</span>
                  <ul>
                    <li><a href="#">S.S.S</a></li>
                    <li><a href="#">Ödəmələr</a></li>
                    <li><a href="#">AML / KYC Politikası</a></li>
                    <li><a href="#">Sportsbook Terms</a></li>
                  </ul>
                </li>
                <li>
                  <span href="#">Əlaqə</span>
                  <ul>
                    <li><a href="#">destek@betbuta.com</a></li>
                    <li><a href="#">Canlı Dəstək</a></li>
                    <li><a href="#">Ortaqlıq Maili</a></li>
                  </ul>
                </li>
              </ul>
            </nav>
            <div class="logo-content">
              <img
                src="../../assets/images/section/logo.png"
                alt=""
                class="logo"
                width="140"
                height="35"
              />
            </div>
          </div>
          <div class="cards-content">
            <div class="part__1">
              <a href="#"><img src="../../assets/images/section/18plus.png" alt="" /></a>
              <a href="#"><img src="../../assets/images/section/ssl.png" alt="" /></a>
            </div>
            <div class="part__2">
              <a href="#"><img src="../../assets/images/section/visa.png" alt="" /></a>
              <a href="#"><img src="../../assets/images/section/mastercard.png" alt="" /></a>
              <a href="#"><img src="../../assets/images/section/neteller.png" alt="" /></a>
              <a href="#"><img src="../../assets/images/section/skrill.png" alt="" /></a>
              <a href="#"><img src="../../assets/images/section/giro-pay.png" alt="" /></a>
              <a href="#"><img src="../../assets/images/section/paysafecard.png" alt="" /></a>
              <a href="#"><img src="../../assets/images/section/qiwi.png" alt="" /></a>
              <a href="#"><img src="../../assets/images/section/sofort.png" alt="" /></a>
              <a href="#"><img src="../../assets/images/section/bitcoin.png" alt="" /></a>
            </div>
          </div>
          <div class="partnership-content">
            <a href="#"><img src="../../assets/images/section/netent.png" alt="" /></a>
            <a href="#"><img src="../../assets/images/section/betsoft.png" alt="" /></a>
            <a href="#"
              ><img src="../../assets/images/section/evolution-gaming.png" alt=""
            /></a>
            <a href="#"><img src="../../assets/images/section/isoftbet.png" alt="" /></a>
            <a href="#"><img src="../../assets/images/section/habanero.png" alt="" /></a>
            <a href="#"><img src="../../assets/images/section/playgo.png" alt="" /></a>
            <a href="#"><img src="../../assets/images/section/endorphina.png" alt="" /></a>
            <a href="#"><img src="../../assets/images/section/nyx.png" alt="" /></a>
            <a href="#"><img src="../../assets/images/section/gameart.png" alt="" /></a>
            <a href="#"><img src="../../assets/images/section/1x2-gaming.png" alt="" /></a>
            <a href="#"><img src="../../assets/images/section/belatra.png" alt="" /></a>
            <a href="#"><img src="../../assets/images/section/elk.png" alt="" /></a>
            <a href="#"><img src="../../assets/images/section/amatic.png" alt="" /></a>
            <a href="#"><img src="../../assets/images/section/quickspin.png" alt="" /></a>
            <a href="#"
              ><img src="../../assets/images/section/pragmatic-play.png" alt=""
            /></a>
            <a href="#"><img src="../../assets/images/section/ezugi.png" alt="" /></a>
            <a href="#"><img src="../../assets/images/section/asia-gaming.png" alt="" /></a>
            <a href="#"><img src="../../assets/images/section/ganapati.png" alt="" /></a>
          </div>
          <div class="copyright-content">
            <span> © Copyright betbuta 2020 </span>

            <div class="download">
              <div class="social-items">
                <a href="">
                  <i class="fa-brands fa-instagram"></i>
                </a>
                <a href="">
                  <i class="fa-brands fa-telegram"></i>
                </a>
                <a href="">
                  <i class="fa-brands fa-facebook"></i>
                </a>
                <a href="">
                  <i class="fa-brands fa-youtube"></i>
                </a>
              </div>
              <div class="download-items">
                <a href="" class="play-store">
                  <img
                    src="../../assets/images/section/download_play.png"
                    alt=""
                    width="100"
                    height="30"
                  />
                </a>
                <a href="" class="app-store">
                  <img
                    src="../../assets/images/section/download_apple.png"
                    alt=""
                    width="100"
                    height="30"
                  />
                </a>
              </div>
            </div>
          </div>
        </div>
      </footer>
    </div>

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
    />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
      integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <script src="../../assets/js/menuAction.js"></script>
    <script src="../../assets/js/auth.js"></script>
    <script>
      // ============= OLD LOGIN HANDLER (DISABLED) =============
// Bu kodu index.html sayfasına ekleyin veya ayrı bir JS dosyası olarak dahil edin
// Note: This old script is now commented out and replaced with auth.js
/*

// API Base URL - Backend'iniz çalışıyorsa kullanın, yoksa localStorage'da tutun
const API_BASE_URL = 'http://localhost:5000/api';
const USE_BACKEND = false; // Backend kullanmak istemiyorsanız false yapın

// Kullanıcı verilerini localStorage'da saklamak için key'ler
const STORAGE_KEYS = {
    CURRENT_USER: 'currentUser',
    ALL_USERS: 'allUsers',
    AUTH_TOKEN: 'authToken',
    USER_PROFILES: 'userProfiles'
};

// Rastgele kullanıcı ID oluştur
function generateUserId() {
    return 'USER_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
}

// Rastgele başlangıç bakiyesi oluştur (0.15 - 1.00 AZN arası)
function generateRandomBalance() {
    return (Math.random() * 0.85 + 0.15).toFixed(2);
}

// Kullanıcı profili oluştur
function createUserProfile(username, password) {
    const userId = generateUserId();
    const profile = {
        id: userId,
        username: username,
        email: `${username}@butabet.com`, // Otomatik email oluştur
        password: password, // Gerçek uygulamada hash'lenmelidir
        firstName: username,
        lastName: 'User',
        balance: generateRandomBalance(),
        currency: 'AZN',
        createdAt: new Date().toISOString(),
        lastLogin: new Date().toISOString(),
        isActive: true,
        role: 'user',
        stats: {
            totalDeposits: 0,
            totalWithdrawals: 0,
            totalBets: 0,
            totalWins: 0
        },
        preferences: {
            language: 'AZ',
            notifications: true,
            twoFactorAuth: false
        }
    };
    
    return profile;
}

// Kullanıcıyı localStorage'a kaydet
function saveUserToStorage(userProfile) {
    // Tüm kullanıcıları al
    let allUsers = JSON.parse(localStorage.getItem(STORAGE_KEYS.ALL_USERS) || '[]');
    
    // Kullanıcı zaten varsa güncelle, yoksa ekle
    const existingIndex = allUsers.findIndex(u => u.username === userProfile.username);
    
    if (existingIndex !== -1) {
        // Mevcut kullanıcıyı güncelle
        allUsers[existingIndex] = {
            ...allUsers[existingIndex],
            lastLogin: new Date().toISOString()
        };
        userProfile = allUsers[existingIndex]; // Mevcut profili kullan
    } else {
        // Yeni kullanıcı ekle
        allUsers.push(userProfile);
    }
    
    // Tüm kullanıcıları kaydet
    localStorage.setItem(STORAGE_KEYS.ALL_USERS, JSON.stringify(allUsers));
    
    // Aktif kullanıcıyı kaydet
    localStorage.setItem(STORAGE_KEYS.CURRENT_USER, JSON.stringify(userProfile));
    
    // Fake JWT token oluştur
    const fakeToken = btoa(JSON.stringify({
        userId: userProfile.id,
        username: userProfile.username,
        exp: Date.now() + (24 * 60 * 60 * 1000) // 24 saat
    }));
    localStorage.setItem(STORAGE_KEYS.AUTH_TOKEN, fakeToken);
    
    return userProfile;
}

// Login işlemi
async function handleLogin(event) {
    if (event) event.preventDefault();
    
    // Form elementlerini al
    const username = document.getElementById('username')?.value || document.querySelector('input.username')?.value;
    const password = document.getElementById('password')?.value || document.querySelector('input.password')?.value;
    
    // Basit validasyon
    if (!username || !password) {
        showNotification('error', 'Kullanıcı adı ve şifre gereklidir!');
        return false;
    }
    
    // Minimum karakter kontrolü (opsiyonel)
    if (username.length < 3) {
        showNotification('error', 'Kullanıcı adı en az 3 karakter olmalıdır!');
        return false;
    }
    
    if (password.length < 4) {
        showNotification('error', 'Şifre en az 4 karakter olmalıdır!');
        return false;
    }
    
    try {
        // Loading göster
        showLoading(true);
        
        // Kullanıcı profilini oluştur veya mevcut olanı al
        const userProfile = createUserProfile(username, password);
        
        // Kullanıcıyı kaydet
        const savedProfile = saveUserToStorage(userProfile);
        
        // Başarılı bildirim
        showNotification('success', `Hoş geldiniz, ${savedProfile.username}!`);
        
        // Header'ı güncelle (giriş yapılmış görünüm)
        updateHeaderForLoggedInUser(savedProfile);
        
        // 1.5 saniye bekle ve ana sayfaya yönlendir
        setTimeout(() => {
            // Eğer admin paneli login sayfasındaysak admin dashboard'a yönlendir
            if (window.location.pathname.includes('/admin/') || window.location.pathname.includes('/auth/login')) {
                window.location.href = '../admin/dashboard.html';
            } else {
                // Normal kullanıcıyı ana sayfada tut veya profil sayfasına yönlendir
                // window.location.reload(); // Sayfayı yenile
                // veya
                // window.location.href = './depozit.html'; // Depozit sayfasına git
                window.location.reload();
            }
        }, 1500);
        
    } catch (error) {
        console.error('Login error:', error);
        showNotification('error', 'Giriş sırasında bir hata oluştu!');
    } finally {
        showLoading(false);
    }
    
    return false;
}

// Header'ı giriş yapmış kullanıcı için güncelle
function updateHeaderForLoggedInUser(user) {
    const formBar = document.querySelector('.form-bar');
    if (!formBar) return;
    
    // Form bar'ı giriş yapmış kullanıcı görünümüne çevir
    formBar.classList.add('isAuth');
    
    // İçeriği değiştir
    formBar.innerHTML = `
        <div class="account-information">
            <a href="./profile.html">
                <i class="fa fa-user"></i>
            </a>
            <span>${user.username}</span>
            <span class="balance">Balans: ${user.balance} ${user.currency}</span>
        </div>
        <div class="button-group">
            <a href="./depozit.html" class="btn btn-deposit">Depozit</a>
            <a href="./moneyBack.html" class="btn btn-withdraw">Para Çek</a>
            <button onclick="handleLogout()" class="btn btn-logout">Çıkış</button>
        </div>
    `;
}

// Çıkış işlemi
function handleLogout() {
    if (confirm('Çıkmak istediğinizden emin misiniz?')) {
        // LocalStorage'dan kullanıcı bilgilerini temizle
        localStorage.removeItem(STORAGE_KEYS.CURRENT_USER);
        localStorage.removeItem(STORAGE_KEYS.AUTH_TOKEN);
        
        // Ana sayfaya yönlendir
        window.location.href = '/pages/user/index.html';
    }
}

// Loading spinner göster/gizle
function showLoading(show) {
    let loader = document.getElementById('loginLoader');
    
    if (show) {
        if (!loader) {
            loader = document.createElement('div');
            loader.id = 'loginLoader';
            loader.innerHTML = `
                <div style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; 
                            background: rgba(0,0,0,0.5); display: flex; 
                            justify-content: center; align-items: center; z-index: 9999;">
                    <div style="background: white; padding: 20px; border-radius: 10px;">
                        <div class="spinner" style="border: 3px solid #f3f3f3; 
                                border-top: 3px solid #3498db; border-radius: 50%; 
                                width: 40px; height: 40px; animation: spin 1s linear infinite;">
                        </div>
                        <p style="margin-top: 10px;">Giriş yapılıyor...</p>
                    </div>
                </div>
                <style>
                    @keyframes spin {
                        0% { transform: rotate(0deg); }
                        100% { transform: rotate(360deg); }
                    }
                </style>
            `;
            document.body.appendChild(loader);
        }
    } else {
        if (loader) {
            loader.remove();
        }
    }
}

// Bildirim göster
function showNotification(type, message) {
    // Mevcut bildirimleri temizle
    const existingNotifications = document.querySelectorAll('.notification-toast');
    existingNotifications.forEach(n => n.remove());
    
    // Yeni bildirim oluştur
    const notification = document.createElement('div');
    notification.className = 'notification-toast';
    notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 15px 20px;
        border-radius: 5px;
        color: white;
        font-weight: 500;
        z-index: 10000;
        animation: slideIn 0.3s ease;
        min-width: 250px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        ${type === 'success' ? 'background: #28a745;' : 'background: #dc3545;'}
    `;
    
    notification.innerHTML = `
        <div style="display: flex; align-items: center;">
            <span style="margin-right: 10px;">
                ${type === 'success' ? '✓' : '✗'}
            </span>
            <span>${message}</span>
        </div>
    `;
    
    // Animasyon için stil ekle
    if (!document.getElementById('notificationStyles')) {
        const style = document.createElement('style');
        style.id = 'notificationStyles';
        style.innerHTML = `
            @keyframes slideIn {
                from {
                    transform: translateX(100%);
                    opacity: 0;
                }
                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }
        `;
        document.head.appendChild(style);
    }
    
    document.body.appendChild(notification);
    
    // 3 saniye sonra kaldır
    setTimeout(() => {
        notification.style.animation = 'slideIn 0.3s ease reverse';
        setTimeout(() => notification.remove(), 300);
    }, 3000);
}

// Sayfa yüklendiğinde kontrol et
document.addEventListener('DOMContentLoaded', function() {
    // Mevcut kullanıcıyı kontrol et
    const currentUser = JSON.parse(localStorage.getItem(STORAGE_KEYS.CURRENT_USER));
    
    if (currentUser) {
        // Token'ı kontrol et
        const token = localStorage.getItem(STORAGE_KEYS.AUTH_TOKEN);
        if (token) {
            try {
                const tokenData = JSON.parse(atob(token));
                if (tokenData.exp > Date.now()) {
                    // Token geçerli, header'ı güncelle
                    updateHeaderForLoggedInUser(currentUser);
                } else {
                    // Token süresi dolmuş
                    localStorage.removeItem(STORAGE_KEYS.CURRENT_USER);
                    localStorage.removeItem(STORAGE_KEYS.AUTH_TOKEN);
                }
            } catch (e) {
                console.error('Token parse error:', e);
            }
        }
    }
    
    // Login formuna event listener ekle
    const loginForm = document.getElementById('loginForm');
    if (loginForm) {
        loginForm.addEventListener('submit', handleLogin);
    }
    
    // Login butonuna tıklama eventi ekle
    const loginBtn = document.querySelector('.btn-login');
    if (loginBtn && !loginBtn.hasAttribute('onclick')) {
        loginBtn.addEventListener('click', handleLogin);
    }
});

// Global fonksiyon olarak da tanımla (onclick için)
window.handleLogin = handleLogin;
window.handleLogout = handleLogout;

// Kullanıcı bilgilerini almak için yardımcı fonksiyonlar
window.getCurrentUser = function() {
    return JSON.parse(localStorage.getItem(STORAGE_KEYS.CURRENT_USER));
};

window.isUserLoggedIn = function() {
    const user = getCurrentUser();
    const token = localStorage.getItem(STORAGE_KEYS.AUTH_TOKEN);
    return !!(user && token);
};

window.getUserBalance = function() {
    const user = getCurrentUser();
    return user ? parseFloat(user.balance) : 0;
};

window.updateUserBalance = function(newBalance) {
    const user = getCurrentUser();
    if (user) {
        user.balance = newBalance.toFixed(2);
        saveUserToStorage(user);
        updateHeaderForLoggedInUser(user);
    }
};
*/
    </script>
  </body>
</html>